<!DOCTYPE html>
<html>
<head>
    <script src="https://www.youtube.com/iframe_api"></script>
</head>

<body>
    <h1>{{text}}</h1>
    <div id="player"></div>
    <button id="playButton" onclick="playVideo()">再生</button>
    <button onclick="pauseVideo()">一時停止</button>
    <div id="endMessage" style="display: none;">アンケートに答えてください</div>

    <!-- <iframe width="560" height="315" src="https://www.youtube.com/embed/4t8JCicyYfc?enablejsapi=1" title="YouTube video player" frameborder="0" allowfullscreen
    allow="autoplay; encrypted-media" 
    modestbranding="1"
    controls="0"
    disablekb="1">
    </iframe> -->

    <script>
        var player;

        // YouTube APIがロードされたときに実行されるコールバック関数
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                videoId: '4t8JCicyYfc',  // 埋め込むYouTube動画のIDを指定
                playerVars: {
                    'controls': 0,  // コントロールを非表示にする
                    'disablekb': 1,  // キーボード操作を無効にする
                    'showinfo': 0,   // タイトルとアップロード者情報を非表示にする
                    'rel': 0,        // 関連動画を非表示にする
                    'autoplay': 1,   // 自動再生を有効にする
                    'playsinline': 1  // iOSデバイスでインライン再生を有効にする
                },
                events: {
                    'onReady': function(event) {
                        event.target.playVideo();  // 動画を自動再生
                    },
                    'onStateChange': function(event) {
                        if (event.data === YT.PlayerState.PAUSED) {
                            // 動画が一時停止されたときに再度再生
                            event.target.playVideo();
                        }
                        if (event.data === YT.PlayerState.ENDED) {
                            // 動画再生が終了したときにテキストを表示
                            var endMessage = document.getElementById("endMessage");
                            if (endMessage) {
                                endMessage.style.display = "block";
                            }
                        }
                    }
                }
            });
        }

        // 動画を再生する関数
        function playVideo() {
            if (player && player.playVideo) {
                player.playVideo();
                // 再生ボタンを非表示にする
                var playButton = document.getElementById("playButton");
                if (playButton) {
                    playButton.style.display = "none";
                }
            }
        }

        // 動画を一時停止する関数
        function pauseVideo() {
            if (player && player.pauseVideo) {
                player.pauseVideo();
            }
        }
    </script>
</body>
</html>

